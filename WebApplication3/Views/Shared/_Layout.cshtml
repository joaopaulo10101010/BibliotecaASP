@using WebApplication3.Authenticacao;

@{

    var isLogged = Context.Session.GetInt32(SessionKeys.UserId).HasValue;

    var role = Context.Session.GetString(SessionKeys.UserRole);

    var userName = Context.Session.GetString(SessionKeys.UserName);

}

<!DOCTYPE html>

<html lang="pt-br">

<head>

    <meta charset="utf-8" />

    <title>@ViewData["Title"] - Biblioteca</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="~/css/site.css" />

    @RenderSection("Styles", required: false)

    <style>

        /* estilos básicos opcionais (caso não esteja usando site.css) */

        body {
            font-family: system-ui,Segoe UI,Roboto,Arial,sans-serif;
            margin: 0
        }



        .topnav {
            display: flex;
            gap: 12px;
            align-items: center;
            padding: 10px 16px;
            border-bottom: 1px solid #eee;
            background: #fff;
            position: sticky;
            top: 0
        }



            .topnav a {
                text-decoration: none;
                color: #111
            }



        .spacer {
            flex: 1
        }



        .btn-link {
            background: none;
            border: 1px solid #2563eb;
            color: #2563eb;
            border-radius: 4px;
            padding: 6px 10px;
            cursor: pointer
        }



            .btn-link:hover {
                background: #e6f0ff
            }



        .container {
            padding: 20px
        }
    </style>

</head>

<body>

    <header>

        @if (isLogged)

        {

            <nav class="topnav">

                <a asp-controller="Home" asp-action="Index">Home</a>

                <a asp-controller="Livro" asp-action="Index">Livros</a>

                <a asp-controller="Autor" asp-action="Index">Autores</a>

                <a asp-controller="Editora" asp-action="Index">Editoras</a>

                <a asp-controller="Genero" asp-action="Index">Gêneros</a>

                <a asp-controller="Emprestimo" asp-action="Vitrine">Emprestimos</a>


                @* Somente Admin vê Usuários *@ 

                @if (role == "Admin")

                {

                    <a asp-controller="Usuarios" asp-action="CriarUsuario">Usuários</a>

                }



                <span class="spacer"></span>

                <span>Olá, @userName</span>

                <form asp-controller="Auth" asp-action="Logout" method="post" style="display:inline">

                    @Html.AntiForgeryToken()

                    <button type="submit" class="btn-link">Sair</button>

                </form>

            </nav>

        }

    </header>



    <main role="main" class="container">

        @RenderBody()

    </main>



    @RenderSection("Scripts", required: false)

</body>

</html> 